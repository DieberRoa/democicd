steps:
- template: ios-QA.yml
- checkout: self
  submodules: true
  persistCredentials: true

  - task: InstallAppleCertificate@2
    inputs:
      certSecureFile: $(p12filename)
      certPwd: $(p12password)
      keychain: 'temp'
      deleteCert: true  

  - task: InstallAppleProvisioningProfile@1
    inputs:
      provisioningProfileLocation: 'secureFiles'
      provProfileSecureFile: $(provisioningprofile)
      removeProfile: true
    
  - task: Xcode@5
    inputs:
      actions: 'build'
      scheme: ''
      sdk: $(SDK)
      configuration: $(Configuration)
      xcWorkspacePath: '**/*.xcodeproj/project.xcworkspace'
      xcodeVersion: 'default' # Options: 8, 9, 10, 11, 12, default, specifyPath